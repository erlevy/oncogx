{
    "collab_server" : "",
    "contents" : "library(dplyr)\n\nclonotypes <- read.csv(\"/Users/Eric/tcrseq/new/processed/pancan_clonotypes_all_7-30-2016.txt\", sep=\"\\t\")\n\nclonotypes$clonotype <- as.character(clonotypes$clonotype)\nclonotypes$patient_id <- as.character(clonotypes$patient_id)\nclonotypes$nuc <- as.character(clonotypes$nuc)\n\n# compare exome and blood\n# defining \"public clonotype\" as any that is found in both exome and blood (though not in same patient)\n#exome_pos_blood_pos <- filter(clonotypes, blood > 0 & exome > 0)\n#exome_neg_blood_pos <- filter(clonotypes, blood > 0 & exome == 0)\n#exome_pos_blood_neg <- filter(clonotypes, blood == 0 & exome > 0)\n\n#clonotype_common <- \"TGTGCCACCAGCAGAGACACAGAGCTGCAGTGCTTCCTGCTCTCTGTTCATAAACCTCATTGTTTCCCAGATCCAGGTGCTTTCTCT\"\nclonotype_common <- \"CATSRDTELQCFLLSVHKPHCFPDPGAFS\"\nshared <- clonotypes[which(clonotypes$clonotype==clonotype_common),]\n\n#public_clonotypes_patients <- unique(exome_pos_blood_pos$patient_id)\n\nexome_pos <- filter(clonotypes, exome > 0)\nblood_pos <- filter(clonotypes, blood > 0)\n\nexome_blood_shared_aa <- unique(intersect(exome_pos$clonotype, blood_pos$clonotype))\nexome_or_blood <- filter(clonotypes, exome > 0 | blood > 0)\nexome_or_blood_patients <- unique(exome_or_blood$patient_id)\nexome_blood_public_aa <- names(which(table(exome_or_blood$clonotype)>1))\nexome_blood_shared_all <- filter(exome_or_blood, clonotype %in% exome_blood_shared_aa)\nexome_blood_shared_patients <- unique(exome_blood_shared_all$patient_id)\nexome_blood_public_all <- filter(exome_or_blood, clonotype %in% exome_blood_public_aa)\nexome_blood_public_patients <- unique(exome_blood_public_all$patient_id)\n\n# 100 shared aa sequences between blood and tumor exome\n# 5934 patients with a clonotype in exome OR blood\n# 574 that have a public clonotype\n# 348 of these have the \"sticky\" clonotype\n\n# remove \"sticky\" clonotype\nexome_blood_shared_aa_no_c66 <- exome_blood_shared_aa[exome_blood_shared_aa!=clonotype_common]\nexome_blood_shared_no_c66 <- filter(exome_or_blood, clonotype %in% exome_blood_shared_aa_no_c66)\nexome_blood_shared_patients_no_c66 <- unique(exome_blood_shared_no_c66$patient_id)\n\n# only \"sticky\" clonotype\nexome_blood_shared_only_c66 <- filter(exome_or_blood, clonotype==clonotype_common)\nexome_blood_shared_patients_only_c66 <- unique(exome_blood_shared_only_c66$patient_id)\n\n# includes RNA\npublic_aa <- names(which(table(clonotypes$clonotype)>1))\npublic_aa_n <- c()\nfor (i in 1:length(public_aa))\n{\n  public_aa_n <- c(public_aa_n, nrow(filter(clonotypes, clonotype==public_aa[i])))\n}\n\npublic_all <- filter(clonotypes, clonotype %in% public_aa)\npublic_patients <- unique(public_all$patient_id)\n\n# compare exome and rna\nexome_pos_rna_pos <- filter(clonotypes, rna > 0 & exome > 0)\nexome_neg_rna_pos <- filter(clonotypes, rna > 0 & exome == 0)\nexome_pos_rna_neg <- filter(clonotypes, rna == 0 & exome > 0)\n\n",
    "created" : 1468542991227.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1384801515",
    "id" : "F9B464A6",
    "lastKnownWriteTime" : 1470087318,
    "last_content_update" : 1470087318,
    "path" : "~/tcrseq/new/rstudio_data/clonotypes_analysis.R",
    "project_path" : "clonotypes_analysis.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 8,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}